@inject IDriver _driver

<div class="p-2 m-2 d-flex flex-row align-items-center">
    <h3 class="flex-grow-1">@Relation.FirstClassCopyName:@Relation.FirstClassName - [@Relation.Name] - @Relation.SecondClassCopyName:@Relation.SecondClassName</h3>
    @if (!_delete)
    {
        <button class="btn btn-outline-danger m-2" @onclick="Delete">Удалить</button>
    }
    else
    {
        <p>Удаление...</p>
    }
</div>

@code{
    [Parameter]
    public Relation Relation { get; set; } = null;
    [Parameter]
    public string DbName { get; set; } = "";

    private bool _delete = false;

    private async void Delete()
    {
        IResultCursor cursor;
        IAsyncSession session = _driver.AsyncSession(c => c.WithDatabase(DbName));
        try
        {
            string node1 = "n:" + Relation.FirstClassName + "{title:\"" + Relation.FirstClassCopyName + "\"}";
            string node2 = "b:" + Relation.SecondClassName + "{title:\"" + Relation.SecondClassCopyName + "\"}";
            cursor = await session.RunAsync(@$"match ({node1})-[r:{Relation.Name}]-({node2}) delete r, n, b");
        }
        finally
        {
            await session.CloseAsync();
        }
        _delete = true;
        StateHasChanged();
    }
}